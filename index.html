<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <title>Lucrare de laborator nr 4</title>
</head>
<body onload = "validate()">

    <div id="main_container">
        <div id="title"><h1>Formularul de inregistrare </h1></div>
        <form  action="http://localhost:3000/form-data", method="post" target="_self" id="main_form">
           <div class="mini_container"><label class="info_text">Numele : <br>
            <input type="text" name="name" placeholder="Intorduceti numele" autocomplete="off" id="name"></label>
        </div>
        <div id="name_checker"><p id="name_validator"></p></div>
        <div class="mini_container">
            <label class="info_text">Prenumele : <br>
                <input type="text" name="surname" placeholder="Introduceti prenumele" id="surname" required></label>
            </div> 
        <div id="surname_checker"><p id="surname_validator"></p></div>       
       <div class="mini_container">
        <label class="info_text">Email : <br>
            <input type="email" name="email" placeholder="Introduceti email-ul" id="email" autocomplete="off" required></label>
        </div>
        <div id="email_checker"><p id="email_validator"></p></div>
       <div class="mini_container">
        <label class="info_text">Telefon : <br>
            <input type="phone" name="phone" placeholder="Introduceti telefonul mobil" id="phone"> </label>
        </div>
        <div id="phone_checker"><p id="phone_validator"></p></div>
        <div class="mini_container">
            <label class="info_text">Adresa fizica : <br>
                <input type="text" name="address" placeholder="Introduceti adresa" id="address"> </label>
            </div>
            <div class="mini_container">
                <label class="info_text">Profesia : <br>
                    <input type="text" name="profession" placeholder="Introduceti profesia" id="profession"> </label>
                </div>
        <div class="input_fields_wrap">
            <button type="button" id="links_checker" class="btn-primary">Check Social</button>
             </div>
             <div id="add_social_btn">
                <button type="button" class="btn btn-primary" id="frs_btn">Add Social Links</button>
             </div>
             <div id="add_education_btn">
                <button type="button" class="btn btn-primary" id="sc_btn">Add Education</button>
             </div>
        <div class="form_fields_wrap">
        </div>  
        <div id="add_job_btn">
            <button type="button" class="btn btn-primary" id="th_btn">Add Job</button>
         </div>
         <div class="job_field_wrap"></div>
            <!-- <div id="send_btn"><input type="submit" value="Submit"></div> -->
         <button type="submit" class="btn btn-primary" id="im_btn">Submit</button>      
    </form>
       
    </div>
    <script src="jquery-3.6.0.min.js"></script>
    <script src="script.js"></script>
    <script>
        
$("#main_form").submit(function(e) {
   
   e.preventDefault();

   var form = $(this);
   var url = form.attr('action');
   var userInputs = {};
   form.serializeArray().forEach((input) => {userInputs[input.name] = input.value;})
   console.log(userInputs);
   $.ajax({
     url,
     method: 'POST',
     datatype: 'json',
     headers: {'Content-Type': 'application/json'},
     data: JSON.stringify(userInputs),
     success: function(response) {
       console.log(response);
     }
   });
 });

    </script>

</body>
</html>